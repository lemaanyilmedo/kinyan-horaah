# קניין הוראה - גרסה 2.0 (V2)

## 🎯 מה חדש בגרסה זו?

גרסה משופרת של מערכת הבחנים עם פיצ'רים מתקדמים מבוססי CODE.txt ושיפורים נוספים.

---

## 📁 קבצים

- **index-v2.html** - דף המשחק המשופר
- **app-v2.js** - לוגיקת המשחק המשופרת
- **README_V2.md** - קובץ זה

---

## ✨ פיצ'רים עיקריים

### 1️⃣ **מסך אחד אחיד**
- רקע קבוע עם header וניקוד תמיד גלוי
- אזור תוכן דינמי שמתחלף בין מסכים
- ללא צורך בגלילה - הכל במרכז המסך

### 2️⃣ **שאלה בשני שלבים**
```
שלב 1 (10 שניות):
- השאלה מוצגת בגודל ענק במרכז המסך
- כיתוב: "שאלה שהגיעה אל שולחן בית ההוראה"
- טיימר של 10 שניות

↓ מעבר אוטומטי

שלב 2 (30 שניות):
- השאלה מתקטנת (אנימציה חלקה)
- מופיעות 4 תשובות אפשריות
- כפתורי פעולה: "צריך עיון" + "לשאלה הבאה"
- טיימר של 30 שניות
```

### 3️⃣ **פידבק מעורפל**
- ❌ **אין** סימון ✓ / ✗ על תשובות
- ✅ הודעה כללית: "התשובה נרשמה"
- המשתמש לא יודע אם ענה נכון עד סוף המבחן

### 4️⃣ **שני כפתורי פעולה**
- **"צריך עיון"** - מסמן שאלה לבדיקה מאוחר יותר
- **"לשאלה הבאה"** - ממשיך למשחק
- שני הכפתורים זמינים רק **לאחר בחירת תשובה**

### 5️⃣ **ניקוד מצטבר**
```javascript
localStorage: 'kinyan_total_score_[playerId]'
```
- הניקוד נשמר בין משחקים
- כל תשובה נכונה = 10 נקודות
- הניקוד מוצג בכל עת בheader

### 6️⃣ **מניעת שאלות חוזרות**
```javascript
localStorage: 'kinyan_used_questions_[quizType]'
```
- כל שאלה ששוחקה נשמרת
- בכל משחק חדש - רק שאלות שלא נשאלו
- איפוס אוטומטי כשנגמרות שאלות

### 7️⃣ **שמירת התקדמות**
```javascript
localStorage: 'kinyan_last_game_[playerId]'
```
- שמירה אוטומטית של מצב המשחק
- מניעת משחק כפול (שעה בין משחקים)

### 8️⃣ **מסך תוצאות משופר**
- ניקוד המשחק הנוכחי
- ניקוד מצטבר כולל
- מספר תשובות נכונות
- מספר שאלות שסומנו "צריך עיון"

### 9️⃣ **טופס פרטים עם אישור שיווק**
```html
✅ תיבת סימון חובה:
"אני מאשר/ת שניתן לשלוח אלי דיוור ושיווק 
בנושאי לימוד תורה והלכה"
```

---

## 🎨 עיצוב

### צבעים
- **רקע**: גרדיאנט סגול-כחול (`#667eea` → `#764ba2`)
- **אקסנט**: זהב (`#D4B182`)
- **ניקוד**: אדום (`#FF2A32`)
- **כרטיסים**: לבן עם צללים

### פונטים
- **Heebo** - פונט עברי נקי ומודרני
- **גדלים**:
  - שאלה גדולה: 3.5rem
  - שאלה קטנה: 2rem
  - תשובות: 1.4rem

### אנימציות
- מעבר בין שלבים: `fade + scale`
- הופעת תשובות: `slide-up`
- טיימר: `stroke-dashoffset` (SVG)
- כפתורים: `hover + transform`

---

## 🔧 אינטגרציה עם Firebase

### Collections
```javascript
// Attempts - ניסיונות משחק
{
  player_id: string,
  player_name: string,
  quiz_type: 'shabbat' | 'issur_heter',
  started_at: timestamp,
  completed_at: timestamp,
  status: 'in_progress' | 'completed',
  answers: object,
  need_review: array,
  correct_count: number,
  points_earned: number
}

// Leads - פרטי משתמשים
{
  player_id: string,
  name: string,
  phone: string,
  email: string,
  marketing_consent: boolean,
  quiz_type: string,
  attempt_id: string,
  created_at: timestamp
}
```

---

## 🚀 הרצה

### פתיחת הקובץ
```bash
# פתח את index-v2.html בדפדפן
start index-v2.html
```

### דרישות
- דפדפן מודרני (Chrome, Firefox, Edge)
- חיבור לאינטרנט (לטעינת Firebase, Tailwind, Fonts)

---

## 📊 LocalStorage Keys

| Key | תיאור | דוגמה |
|-----|--------|-------|
| `kinyan_player_id` | מזהה ייחודי לשחקן | `player_1234567890_abc123` |
| `kinyan_player_name` | שם השחקן | `משה כהן` |
| `kinyan_total_score_[playerId]` | ניקוד מצטבר | `240` |
| `kinyan_used_questions_shabbat` | שאלות ששוחקו בשבת | `[0,5,12,18]` |
| `kinyan_used_questions_issur_heter` | שאלות ששוחקו באיסור והיתר | `[2,7,15]` |
| `kinyan_last_game_[playerId]` | משחק אחרון | `{quiz: 'shabbat', timestamp: 1234567890, completed: true}` |

---

## 🎮 זרימת משחק

```
1. מסך כניסה (Lobby)
   ↓ בחירת נושא
   
2. שאלה - שלב 1 (10 שניות)
   - שאלה גדולה במרכז
   ↓ מעבר אוטומטי
   
3. שאלה - שלב 2 (30 שניות)
   - שאלה קטנה + 4 תשובות
   - בחירת תשובה
   ↓ לחיצה על כפתור
   
4. חזרה לשלב 2 (24 פעמים)
   ↓ סיום כל השאלות
   
5. מסך תוצאות
   - ניקוד + סטטיסטיקות
   - טופס פרטים
   ↓ שליחת טופס
   
6. חזרה למסך כניסה
```

---

## 🔒 מניעת משחק כפול

```javascript
// בדיקה אוטומטית בתחילת כל משחק
if (timeSinceLastGame < 1 hour && sameQuizType) {
  showError('המתן בבקשה - ניתן לשחק רק לאחר שעה');
  return;
}
```

---

## 🐛 Debugging

### פתיחת Console
```
F12 → Console Tab
```

### הודעות חשובות
```javascript
'Firebase initialized successfully'
'Loaded X questions for [quizType]'
'Resetting used questions - all questions have been used'
```

### איפוס מלא
```javascript
// הרץ ב-Console
localStorage.clear();
location.reload();
```

---

## 📝 הבדלים מהגרסה המקורית

| תכונה | index.html מקורי | index-v2.html חדש |
|-------|------------------|-------------------|
| **מסכים** | 5 מסכים נפרדים | מסך אחד + תוכן דינמי |
| **שאלה** | גודל קבוע | 2 שלבים (גדול→קטן) |
| **טיימר** | 30 שניות | 10+30 שניות |
| **פידבק** | ✓/✗ מיידי | מעורפל ללא חשיפה |
| **כפתורים** | צריך עיון בלבד | עיון + המשך |
| **גלילה** | נדרשת | ללא גלילה |
| **ניקוד** | לפי משחק | מצטבר |
| **שאלות** | אקראי | ללא חזרות |
| **עיצוב** | TailwindCSS | CSS מותאם אישית |
| **רקע** | תמונה | גרדיאנט |

---

## 💡 טיפים לשימוש

1. **ניקוד מצטבר**: הניקוד נשמר גם אחרי סגירת הדפדפן
2. **שאלות חדשות**: כל משחק מציג שאלות שונות
3. **צריך עיון**: השתמש בכפתור לסימון שאלות מורכבות
4. **מניעת כפילויות**: המערכת מונעת משחק כפול באותו נושא
5. **שמירה אוטומטית**: כל תשובה נשמרת מיד ל-Firebase

---

## 🔄 עדכונים עתידיים (אופציונלי)

- [ ] מצב אימון (ללא ניקוד)
- [ ] היסטוריית משחקים
- [ ] לוח תוצאות (Leaderboard)
- [ ] שיתוף תוצאות ברשתות חברתיות
- [ ] מצב תחרות בין שחקנים
- [ ] הסברים מפורטים לתשובות
- [ ] מצב חזרה על שאלות "צריך עיון"

---

## 📞 תמיכה

לשאלות ובעיות טכניות, פנה למפתח המערכת.

---

**גרסה**: 2.0  
**תאריך**: ינואר 2026  
**מפתח**: Cascade AI Assistant

---

## 🎓 רישיון

מערכת זו פותחה עבור פרויקט "קניין הוראה" ומיועדת לשימוש פנימי בלבד.
